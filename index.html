<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Link Bio - MTD VPS (Super)</title>
  <link rel="icon" href="https://i.imgur.com/GCITCIv.png" type="image/png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

  <style>
    :root{
      --bg1:#ee7752; --bg2:#e73c7e; --bg3:#23a6d5; --bg4:#23d5ab;
      --card: rgba(255,255,255,.6);
      --border: rgba(255,255,255,.35);
      --text:#1f2937; --muted:#667085; --brand:#2c3e50; --brand-2:#34495e;
      --btn:#2c3e50; --btn-hover:#34495e; --good:#16a34a; --bad:#dc2626; --warn:#d97706;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;
      color:var(--text);
      background: linear-gradient(-45deg,var(--bg1),var(--bg2),var(--bg3),var(--bg4));
      background-size:400% 400%;
      animation: bgMove 18s ease infinite;
      display:flex;flex-direction:column;align-items:center;
      overflow-x:hidden;
    }
    @keyframes bgMove{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

    .header-bar{
      position:fixed;top:0;left:0;width:100%;
      display:flex;align-items:center;justify-content:space-between;gap:8px;
      padding:10px 18px;z-index:1000;
      backdrop-filter: blur(8px);
      background:linear-gradient(180deg, rgba(255,255,255,.7), rgba(255,255,255,.35));
      border-bottom:1px solid var(--border);
    }
    .menu-icon{font-size:1.4rem;cursor:pointer;color:var(--brand)}
    .right-tools{display:flex;gap:8px;align-items:center;flex-wrap:wrap;justify-content:flex-end}
    .pill-btn{
      background:var(--btn);color:#fff;border:none;border-radius:999px;
      padding:8px 14px;font-size:.9rem;cursor:pointer;transition:.25s;white-space:nowrap
    }
    .pill-btn:hover{background:var(--btn-hover)}
    .toggle{
      display:flex;align-items:center;gap:8px;background:var(--card);
      border:1px solid var(--border);border-radius:999px;padding:6px 10px;cursor:pointer;
    }

    .sidebar{
      position:fixed;inset:0 auto 0 0;width:260px;background:#1f2937;color:#e5e7eb;
      transform:translateX(-100%);transition:.3s;z-index:1100;padding-top:64px;
      box-shadow:6px 0 20px rgba(0,0,0,.2)
    }
    .sidebar.active{transform:none}
    .sidebar a{
      display:flex;align-items:center;gap:10px;padding:14px 16px;text-decoration:none;
      color:#e5e7eb;border-bottom:1px solid rgba(255,255,255,.06)
    }
    .sidebar a:hover{background:rgba(255,255,255,.06)}
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;z-index:1050}
    .overlay.active{display:block}

    .container{width:100%;max-width:960px;padding:96px 18px 28px;margin:auto}
    .card{
      background:var(--card);border:1px solid var(--border);border-radius:18px;
      box-shadow:0 8px 24px rgba(0,0,0,.08);backdrop-filter: blur(10px)
    }
    .header{padding:20px 16px 10px;text-align:center}
    .avatar{
      width:108px;height:108px;border-radius:50%;margin:0 auto 12px;
      background:url('https://i.imgur.com/GCITCIv.png') center/cover no-repeat;
      border:3px solid #fff;box-shadow:0 6px 16px rgba(0,0,0,.15)
    }
    .title{font-size:1.9rem;font-weight:800;color:var(--brand)}
    .subtitle{color:var(--muted);font-size:.95rem;margin-top:2px}
    .social-links{margin:12px 0 2px}
    .social-links a{color:var(--brand);text-decoration:none;margin:0 8px;font-size:1.3rem;transition:.2s}
    .social-links a:hover{color:#3498db;transform:translateY(-2px)}

    .grid{display:grid;gap:14px}
    .grid-2{grid-template-columns:1fr 1fr}
    .grid-3{grid-template-columns:repeat(3,1fr)}
    @media (max-width:900px){.grid-3{grid-template-columns:1fr 1fr}}
    @media (max-width:640px){.grid-2,.grid-3{grid-template-columns:1fr}}

    .search-row{display:flex;gap:10px;margin:12px 0 16px;padding:0 16px}
    .input{flex:1;padding:11px 12px;border-radius:12px;border:1px solid var(--border);background:#fff}
    .mini{padding:10px 12px;border-radius:12px;border:1px solid var(--border);background:#fff;cursor:pointer}

    .link{
      display:flex;align-items:center;gap:12px;position:relative;
      margin:12px 16px;padding:14px;border-radius:14px;text-decoration:none;color:#fff;
      background:linear-gradient(135deg,#2c3e50,#3b82f6);
      box-shadow:0 10px 18px rgba(17,24,39,.18);
      overflow:hidden;isolation:isolate;transition:.25s
    }
    .link:hover{transform:translateY(-2px);box-shadow:0 14px 22px rgba(17,24,39,.22)}
    .icon{width:40px;height:40px;border-radius:10px;background:rgba(255,255,255,.18);display:grid;place-items:center;font-size:1.1rem;backdrop-filter: blur(4px)}
    .link .txt{flex:1;display:flex;flex-direction:column;line-height:1.2}
    .link .h{font-weight:700}.link .s{font-size:.85rem;opacity:.85}
    .tools{display:flex;gap:8px}
    .chip{background:rgba(255,255,255,.18);border:1px solid rgba(255,255,255,.35);color:#fff;padding:6px 10px;border-radius:999px;font-size:.8rem}
    .tool-btn{background:rgba(255,255,255,.2);border:1px solid rgba(255,255,255,.35);width:36px;height:36px;border-radius:10px;display:grid;place-items:center;color:#fff;cursor:pointer;transition:.2s}
    .tool-btn:hover{transform:translateY(-1px);background:rgba(255,255,255,.28)}
    .link::after{content:"";position:absolute;inset:-120% -60% auto auto;transform:rotate(25deg);height:260%;width:40%;background:linear-gradient(transparent,rgba(255,255,255,.16),transparent);transition:.35s;z-index:-1}
    .link:hover::after{inset:-110% -40% auto auto}

    .widget{padding:14px;border-radius:14px;border:1px solid var(--border);background:rgba(255,255,255,.7)}
    .widget h4{font-size:.95rem;margin-bottom:6px;color:var(--brand)}
    .clock{font-weight:800;font-size:1.4rem}
    .weather small{color:var(--muted)}

    .stats table{width:100%;border-collapse:collapse;font-size:.92rem}
    .stats th,.stats td{padding:8px;border-bottom:1px solid var(--border);text-align:left}
    .stats th{color:var(--brand)}

    .quote{padding:12px;margin-top:8px;border-left:4px solid #3b82f6;background:rgba(255,255,255,.7);border-radius:10px}

    .todo{padding:14px}
    .todo h3{color:var(--brand);margin-bottom:10px}
    .todo-input{display:flex;gap:8px;margin-bottom:10px;flex-wrap:wrap}
    .todo-input input,.todo-input select{padding:10px;border:1px solid var(--border);border-radius:10px;background:#fff}
    .todo-input button{background:var(--btn);color:#fff;border:none;border-radius:10px;padding:10px 14px;cursor:pointer}
    .list{max-height:240px;overflow:auto;border-top:1px dashed var(--border)}
    .item{display:flex;align-items:center;gap:8px;padding:10px 0;border-bottom:1px dashed var(--border)}
    .item.completed span{text-decoration:line-through;color:var(--muted)}
    .item.overdue span{color:var(--bad);font-weight:600}
    .item .x{background:var(--bad);color:#fff;border:none;border-radius:8px;padding:6px 10px;cursor:pointer}

    .notes textarea{width:100%;min-height:120px;border:1px solid var(--border);border-radius:12px;padding:10px;background:#fff}

    .modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;z-index:1200}
    .modal.active{display:flex}
    .modal .box{background:#fff;border-radius:16px;padding:18px 16px;max-width:92%;width:380px;text-align:center}
    .modal .box h3{margin-bottom:8px;color:var(--brand)}
    .qr-wrap{display:grid;place-items:center;margin:8px 0}
    .close-btn{margin-top:10px}

    .danger{background:#fee2e2;border:1px solid #fecaca}
    .good{background:#dcfce7;border:1px solid #bbf7d0}
    .warn{background:#fef3c7;border:1px solid #fde68a}

    .footer{margin:16px auto 8px;text-align:center;color:#f8fafc}

    .dark .header-bar{background:linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.35));border-bottom-color:#000}
    .dark .title{color:#e5e7eb}
    .dark .subtitle{color:#a3a3a3}
    .dark .card,.dark .widget,.dark .quote{background:rgba(0,0,0,.45);border-color:rgba(255,255,255,.12);color:#f3f4f6}
    .dark .input,.dark .mini,.dark .todo-input input,.dark .notes textarea{background:#0f172a;color:#e5e7eb;border-color:rgba(255,255,255,.12)}
    .dark .pill-btn{background:#334155}
    .dark .pill-btn:hover{background:#475569}
    .dark .link{box-shadow:0 10px 18px rgba(0,0,0,.45)}
    .dark .footer{color:#e5e7eb}

    .to-top{position:fixed;right:16px;bottom:16px;z-index:999;background:#111827;color:#fff;width:44px;height:44px;border-radius:12px;display:grid;place-items:center;cursor:pointer;box-shadow:0 12px 22px rgba(0,0,0,.25);opacity:0;transform:translateY(16px);transition:.25s}
    .to-top.show{opacity:1;transform:none}
  </style>
</head>
<body>
  <div class="header-bar card">
    <i class="fas fa-bars menu-icon" onclick="toggleSidebar()"></i>
    <div class="right-tools">
      <button class="toggle" id="modeBtn" onclick="toggleMode()"><i class="far fa-moon"></i><span id="modeText">Dark</span></button>
      <button class="pill-btn" onclick="requestNotif()">B·∫≠t th√¥ng b√°o üîî</button>
      <a class="pill-btn" href="https://mtdvps.com/subscribe">ƒêƒÉng K√Ω</a>
    </div>
  </div>

  <aside class="sidebar" id="sidebar">
    <a href="https://mtdvps.com"><i class="fas fa-home"></i>Trang Ch·ªß</a>
    <a href="https://hci.mtdvps.com/"><i class="fas fa-server"></i>D·ªãch V·ª• VPS</a>
    <a href="https://mtdproxy.com"><i class="fas fa-shield-alt"></i>Proxy</a>
    <a href="https://www.facebook.com/ducvps123/?locale=vi_VN"><i class="fas fa-headset"></i>H·ªó Tr·ª£</a>
    <a href="https://beacons.ai/ducvps"><i class="fas fa-shopping-cart"></i>C·ª≠a H√†ng</a>
  </aside>
  <div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

  <main class="container">
    <!-- Header -->
    <section class="card header">
      <div class="avatar"></div>
      <div class="title">MTD VPS</div>
      <div class="subtitle">Cloud VPS ‚Ä¢ Proxy ‚Ä¢ Hosting ‚Ä¢ Tools</div>
      <div class="social-links">
        <a href="mailto:support@mtdvps.com" title="Email"><i class="fas fa-envelope"></i></a>
        <a href="https://www.tiktok.com/@ducvps001" title="TikTok"><i class="fab fa-tiktok"></i></a>
        <a href="https://www.youtube.com/@ducvps1com" title="YouTube"><i class="fab fa-youtube"></i></a>
        <a href="https://www.facebook.com/ducvps123/?locale=vi_VN" title="Facebook"><i class="fab fa-facebook"></i></a>
      </div>
      <div class="search-row">
        <input id="searchInput" class="input" type="text" placeholder="T√¨m li√™n k·∫øt‚Ä¶ (vps, proxy, shop)" oninput="filterLinks()"/>
        <button class="mini" onclick="resetFilter()"><i class="fas fa-times"></i></button>
      </div>
    </section>

    <!-- Top widgets -->
    <section class="grid grid-3">
      <div class="widget">
        <h4>‚è∞ ƒê·ªìng h·ªì</h4>
        <div class="clock" id="clock">--:--:--</div>
      </div>
      <div class="widget weather">
        <h4>üå§Ô∏è Th·ªùi ti·∫øt</h4>
        <div id="weatherMain">ƒêang t·∫£i‚Ä¶</div>
        <small id="weatherSub"></small>
      </div>
      <div class="widget">
        <h4>‚è± Pomodoro</h4>
        <div style="font-weight:800;font-size:1.2rem" id="pomoTime">25:00</div>
        <div style="display:flex;gap:6px;margin-top:6px">
          <select id="pomoWork" class="input" style="max-width:90px"><option>25</option><option>30</option><option>45</option></select>
          <select id="pomoBreak" class="input" style="max-width:90px"><option>5</option><option>10</option><option>15</option></select>
          <button class="pill-btn" onclick="startPomo()">Start</button>
          <button class="pill-btn" onclick="stopPomo()">Stop</button>
        </div>
        <small id="pomoLabel" style="color:var(--muted)">Ch·∫ø ƒë·ªô: Work</small>
      </div>
    </section>

    <!-- Quote -->
    <section class="quote card" id="quoteBox">‚ÄúLoading quote‚Ä¶‚Äù</section>

    <!-- LINKS -->
    <section class="card" id="linksWrap" style="padding:8px 0 10px;margin-top:12px">
      <!-- sample links -->
      <a class="link" href="https://mtdvps.com" data-id="mtdvps" data-url="https://mtdvps.com" onclick="track(event)">
        <div class="icon"><i class="fas fa-cloud"></i></div>
        <div class="txt"><div class="h">MTDVPS.COM</div><div class="s">Cloud VPS, Proxy, M√£ ngu·ªìn, Hosting</div></div>
        <div class="tools"><div class="tool-btn" onclick="openQR(event)"><i class="fas fa-qrcode"></i></div><div class="tool-btn" onclick="copyURL(event)"><i class="fas fa-link"></i></div></div>
      </a>
      <a class="link" href="https://wescan.vn/mtdlive" data-id="wescan" data-url="https://wescan.vn/mtdlive" onclick="track(event)">
        <div class="icon"><i class="fas fa-donate"></i></div>
        <div class="txt"><div class="h">wescan.vn/mtdlive</div><div class="s">Donate qua wescan</div></div>
        <div class="tools"><div class="tool-btn" onclick="openQR(event)"><i class="fas fa-qrcode"></i></div><div class="tool-btn" onclick="copyURL(event)"><i class="fas fa-link"></i></div></div>
      </a>
      <a class="link" href="https://mtdproxy.com" data-id="mtdproxy" data-url="https://mtdproxy.com" onclick="track(event)">
        <div class="icon"><i class="fas fa-shield-alt"></i></div>
        <div class="txt"><div class="h">mtdproxy.com</div><div class="s">Proxy IPv4/IPv6 tƒ©nh & xoay</div></div>
        <span class="chip">-50% HOT</span>
        <div class="tools"><div class="tool-btn" onclick="openQR(event)"><i class="fas fa-qrcode"></i></div><div class="tool-btn" onclick="copyURL(event)"><i class="fas fa-link"></i></div></div>
      </a>
      <a class="link" href="https://mtdshop247.com/" data-id="mtdshop" data-url="https://mtdshop247.com/" onclick="track(event)">
        <div class="icon"><i class="fas fa-store"></i></div>
        <div class="txt"><div class="h">mtdshop247.com</div><div class="s">D·ªãch v·ª• MXH, t√†i kho·∫£n premium</div></div>
        <div class="tools"><div class="tool-btn" onclick="openQR(event)"><i class="fas fa-qrcode"></i></div><div class="tool-btn" onclick="copyURL(event)"><i class="fas fa-link"></i></div></div>
      </a>
      <a class="link" href="https://hci.mtdvps.com/" data-id="hci" data-url="https://hci.mtdvps.com/" onclick="track(event)">
        <div class="icon"><i class="fas fa-server"></i></div>
        <div class="txt"><div class="h">hci.mtdvps.com</div><div class="s">CLOUD VPS Doanh Nghi·ªáp</div></div>
        <div class="tools"><div class="tool-btn" onclick="openQR(event)"><i class="fas fa-qrcode"></i></div><div class="tool-btn" onclick="copyURL(event)"><i class="fas fa-link"></i></div></div>
      </a>
      <a class="link" href="https://zalo.me/g/afdrwb295" data-id="zalo" data-url="https://zalo.me/g/afdrwb295" onclick="track(event)">
        <div class="icon"><i class="fas fa-comments"></i></div>
        <div class="txt"><div class="h">Nh√≥m Zalo Support</div><div class="s">∆Øu ƒë√£i & h·ªó tr·ª£</div></div>
        <div class="tools"><div class="tool-btn" onclick="openQR(event)"><i class="fas fa-qrcode"></i></div><div class="tool-btn" onclick="copyURL(event)"><i class="fas fa-link"></i></div></div>
      </a>
    </section>

    <!-- Analytics -->
    <section class="stats card" style="padding:14px">
      <h4 style="margin-bottom:8px;color:var(--brand)">üìä L∆∞·ª£t click (local)</h4>
      <table id="statTable"><thead><tr><th>Link</th><th>L∆∞·ª£t click</th></tr></thead><tbody></tbody></table>
      <div style="margin-top:6px;font-size:.85rem;color:var(--muted)">* L∆∞u c·ª•c b·ªô tr√™n thi·∫øt b·ªã.</div>
    </section>

    <!-- Tools for forgetful humans -->
    <section class="grid grid-2" style="margin-top:14px">
      <!-- To-Do + ICS -->
      <div class="card todo">
        <h3>‚úÖ To-Do & Nh·∫Øc h·∫°n</h3>
        <div class="todo-input">
          <input id="taskInput" type="text" placeholder="N·ªôi dung‚Ä¶" />
          <input id="dueDateInput" type="date" />
          <select id="dueTimeInput">
            <option value="">--Gi·ªù--</option>
            <!-- hours -->
          </select>
          <select id="repeatInput">
            <option value="none">Kh√¥ng l·∫∑p</option>
            <option value="daily">H√†ng ng√†y</option>
            <option value="weekly">H√†ng tu·∫ßn</option>
          </select>
          <button onclick="addTask()">Th√™m</button>
          <button class="pill-btn" onclick="exportICS()">Xu·∫•t .ICS</button>
        </div>
        <div class="list" id="todoList"></div>
        <div id="todoReport" style="margin-top:8px;color:var(--bad);font-weight:600"></div>
      </div>

      <!-- Reminder Center -->
      <div class="card todo">
        <h3>üîî Reminder Center</h3>
        <div class="todo-input">
          <input id="remText" type="text" placeholder="Nh·∫Øc: u·ªëng n∆∞·ªõc, h·ªçp, g·ªçi KH‚Ä¶" />
          <input id="remDate" type="date" />
          <input id="remTime" type="time" />
          <select id="remRepeat">
            <option value="none">Kh√¥ng l·∫∑p</option>
            <option value="daily">H√†ng ng√†y</option>
            <option value="weekly">H√†ng tu·∫ßn</option>
          </select>
          <button onclick="addReminder()">ƒê·∫∑t nh·∫Øc</button>
        </div>
        <div class="list" id="remList"></div>
        <small style="color:var(--muted)">* Tab ph·∫£i m·ªü ƒë·ªÉ h·∫πn gi·ªù ho·∫°t ƒë·ªông. B·∫≠t ‚ÄúTh√¥ng b√°o‚Äù ƒë·ªÉ nh·∫≠n popup desktop.</small>
      </div>
    </section>

    <section class="grid grid-2" style="margin-top:14px">
      <!-- Hydration & Stretch -->
      <div class="card widget">
        <h4>üíß U·ªëng n∆∞·ªõc / üßç Gi√£n c∆°</h4>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <label>Chu k·ª≥ (ph√∫t): <input id="hydrInt" type="number" min="5" value="30" class="input" style="max-width:90px"></label>
          <button class="pill-btn" onclick="toggleHydration()"><span id="hydrBtnTxt">B·∫≠t nh·∫Øc u·ªëng n∆∞·ªõc</span></button>
        </div>
        <div style="margin-top:6px">Tr·∫°ng th√°i: <b id="hydrStatus">T·∫Øt</b></div>

        <div style="height:8px"></div>

        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <label>Chu k·ª≥ (ph√∫t): <input id="strInt" type="number" min="15" value="60" class="input" style="max-width:90px"></label>
          <button class="pill-btn" onclick="toggleStretch()"><span id="strBtnTxt">B·∫≠t nh·∫Øc gi√£n c∆°</span></button>
        </div>
        <div style="margin-top:6px">Tr·∫°ng th√°i: <b id="strStatus">T·∫Øt</b></div>
      </div>

      <!-- Birthday tracker -->
      <div class="card todo">
        <h3>üéÇ Birthday Tracker</h3>
        <div class="todo-input">
          <input id="bdName" type="text" placeholder="T√™n‚Ä¶" />
          <input id="bdDate" type="date" />
          <button onclick="addBirthday()">Th√™m</button>
        </div>
        <div class="list" id="bdList"></div>
      </div>
    </section>

    <section class="grid grid-2" style="margin-top:14px">
      <!-- Notes -->
      <div class="card notes" style="padding:14px">
        <h3>üìù Sticky Notes</h3>
        <textarea id="noteBox" placeholder="Vi·∫øt nhanh ƒëi·ªÅu c·∫ßn nh·ªõ‚Ä¶ (t·ª± l∆∞u)"></textarea>
        <div style="display:flex;gap:8px;margin-top:8px">
          <button class="pill-btn" onclick="clearNotes()" style="background:#b91c1c">X√≥a ghi ch√∫</button>
          <button class="pill-btn" onclick="downloadText()">T·∫£i .txt</button>
        </div>
      </div>

      <!-- Backup / Restore -->
      <div class="card widget">
        <h3>üíæ Sao l∆∞u & Ph·ª•c h·ªìi</h3>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <button class="pill-btn" onclick="exportBackup()">Xu·∫•t d·ªØ li·ªáu (.json)</button>
          <label class="pill-btn" style="cursor:pointer">
            Nh·∫≠p d·ªØ li·ªáu
            <input id="importFile" type="file" accept="application/json" style="display:none" onchange="importBackup(event)">
          </label>
        </div>
        <small style="color:var(--muted)">Bao g·ªìm: To-do, Reminders, Stats, Birthdays, Notes, c√†i ƒë·∫∑t nh·∫Øc u·ªëng n∆∞·ªõc/gi√£n c∆°, Dark/Light.</small>
      </div>
    </section>

    <div class="footer">MTD VPS ‚Ä¢ <a href="https://mtdvps.com" style="color:#fff;text-decoration:underline">mtdvps.com</a></div>
  </main>

  <button class="to-top" id="toTop" onclick="window.scrollTo({top:0,behavior:'smooth'})"><i class="fas fa-arrow-up"></i></button>

  <!-- QR Modal -->
  <div class="modal" id="qrModal" onclick="closeQR(event)">
    <div class="box card" onclick="event.stopPropagation()">
      <h3>Qu√©t QR ƒë·ªÉ m·ªü li√™n k·∫øt</h3>
      <div class="qr-wrap" id="qrcode"></div>
      <div id="qrUrl" style="font-size:.85rem;word-break:break-all;color:#334155"></div>
      <button class="pill-btn close-btn" onclick="document.getElementById('qrModal').classList.remove('active')">ƒê√≥ng</button>
    </div>
  </div>

  <!-- QR library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js" defer></script>

  <script>
    /* ===== Utils ===== */
    const $ = s=>document.querySelector(s);
    const $$ = s=>document.querySelectorAll(s);
    const LS = (k,v)=>v===undefined?JSON.parse(localStorage.getItem(k)||'null'):(localStorage.setItem(k, JSON.stringify(v)),v);
    function toast(msg){
      const el = document.createElement('div');
      el.textContent = msg;
      el.style.cssText = `position:fixed;left:50%;bottom:26px;transform:translateX(-50%);background:#111827;color:#fff;padding:10px 14px;border-radius:10px;box-shadow:0 12px 24px rgba(0,0,0,.25);z-index:1300;opacity:0;transition:.25s`;
      document.body.appendChild(el);
      requestAnimationFrame(()=>{el.style.opacity=1;});
      setTimeout(()=>{el.style.opacity=0; setTimeout(()=>el.remove(),250)},1700);
    }
    function requestNotif(){
      if(!('Notification' in window)) return toast('Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ Notification');
      Notification.requestPermission().then(p=>toast(p==='granted'?'ƒê√£ b·∫≠t th√¥ng b√°o':'Kh√¥ng c·∫•p quy·ªÅn'));
    }
    function notify(title, body){
      if(!('Notification' in window)) return;
      if(Notification.permission==='granted'){ new Notification(title,{body}); }
    }
    function fmt2(n){return String(n).padStart(2,'0')}

    /* ===== Sidebar + mode ===== */
    function toggleSidebar(){ $('#sidebar').classList.toggle('active'); $('#overlay').classList.toggle('active'); }
    (function initMode(){ const saved = LS('mtd_mode')||'light'; if(saved==='dark'){document.body.classList.add('dark'); $('#modeText').textContent='Light';} })();
    function toggleMode(){ document.body.classList.toggle('dark'); const isDark=document.body.classList.contains('dark'); LS('mtd_mode', isDark?'dark':'light'); $('#modeText').textContent=isDark?'Light':'Dark'; }

    /* ===== Back to top ===== */
    const toTop = $('#toTop'); window.addEventListener('scroll', ()=>{ if(window.scrollY>300) toTop.classList.add('show'); else toTop.classList.remove('show'); });

    /* ===== Clock ===== */
    function updateClock(){ const now=new Date(); $('#clock').textContent=`${fmt2(now.getHours())}:${fmt2(now.getMinutes())}:${fmt2(now.getSeconds())}`; }
    setInterval(updateClock, 1000); updateClock();

    /* ===== Weather (Open-Meteo) ===== */
    async function loadWeather(){
      let lat=21.0278, lon=105.8342, label="H√† N·ªôi";
      if(navigator.geolocation){ try{ const pos = await new Promise((res,rej)=>navigator.geolocation.getCurrentPosition(res,rej,{timeout:2500})); lat=pos.coords.latitude; lon=pos.coords.longitude; label="V·ªã tr√≠ c·ªßa b·∫°n"; }catch(e){} }
      try{ const r=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&timezone=auto`); const d=await r.json(); const cw=d.current_weather;
        const map={0:'Tr·ªùi quang',1:'√çt m√¢y',2:'M√¢y v·ª´a',3:'Nhi·ªÅu m√¢y',45:'S∆∞∆°ng m√π',51:'M∆∞a ph√πn',61:'M∆∞a nh·∫π',63:'M∆∞a v·ª´a',65:'M∆∞a to',80:'M∆∞a r√†o'}; 
        $('#weatherMain').textContent=`${Math.round(cw.temperature)}¬∞C ‚Ä¢ ${map[cw.weathercode]||'Th·ªùi ti·∫øt'}`; $('#weatherSub').textContent=`${label} ‚Ä¢ Gi√≥ ${Math.round(cw.windspeed)} km/h`;
      }catch(e){ $('#weatherMain').textContent='Kh√¥ng t·∫£i ƒë∆∞·ª£c th·ªùi ti·∫øt'; $('#weatherSub').textContent=''; }
    } loadWeather();

    /* ===== Quote ===== */
    const quotes=["Th√†nh c√¥ng = 1% t√†i nƒÉng + 99% n·ªó l·ª±c üí™","Mu·ªën ƒëi nhanh h√£y ƒëi m·ªôt m√¨nh. Mu·ªën ƒëi xa h√£y ƒëi c√πng nhau üöÄ","C∆° h·ªôi kh√¥ng t·ª± ƒë·∫øn ‚Äî h√£y t·∫°o ra n√≥ üî•","Kh√¥ng c√≥ th·∫•t b·∫°i, ch·ªâ c√≥ b√†i h·ªçc üìò","K·ª∑ lu·∫≠t l√† c·∫ßu n·ªëi gi·ªØa m·ª•c ti√™u v√† th√†nh t·ª±u."];
    $('#quoteBox').textContent = quotes[Math.floor(Math.random()*quotes.length)];

    /* ===== Link filter + analytics ===== */
    function filterLinks(){ const q=$('#searchInput').value.trim().toLowerCase(); $$('#linksWrap .link').forEach(a=>{ a.style.display = a.innerText.toLowerCase().includes(q)?'':'none'; }); }
    function resetFilter(){ $('#searchInput').value=''; filterLinks(); }
    const STAT_KEY='mtd_click_stats'; const stats=LS(STAT_KEY) || {};
    function track(e){ const id=e.currentTarget.dataset.id; stats[id]=(stats[id]||0)+1; LS(STAT_KEY,stats); renderStats(); }
    function renderStats(){ const tbody=$('#statTable tbody'); tbody.innerHTML=''; $$('#linksWrap .link').forEach(a=>{ const id=a.dataset.id; const name=a.querySelector('.h').textContent; const tr=document.createElement('tr'); tr.innerHTML=`<td>${name}</td><td>${stats[id]||0}</td>`; tbody.appendChild(tr); }); }
    renderStats();

    /* ===== QR + Copy ===== */
    let qr;
    function openQR(ev){ ev.stopPropagation(); ev.preventDefault(); const a=ev.currentTarget.closest('.link'); const url=a.dataset.url; $('#qrModal').classList.add('active'); $('#qrUrl').textContent=url; const box=$('#qrcode'); box.innerHTML=''; qr=new QRCode(box,{text:url,width:220,height:220,correctLevel:QRCode.CorrectLevel.M}); }
    function closeQR(ev){ if(ev.target.id==='qrModal') $('#qrModal').classList.remove('active'); }
    async function copyURL(ev){ ev.stopPropagation(); ev.preventDefault(); const a=ev.currentTarget.closest('.link'); const url=a.dataset.url; try{ await navigator.clipboard.writeText(url); toast('ƒê√£ copy link!'); }catch{ toast('Copy kh√¥ng th√†nh c√¥ng'); } }

    /* ===== Populate time options for To-do ===== */
    (function(){ const t=$('#dueTimeInput'); t.innerHTML='<option value="">--Gi·ªù--</option>'; for(let h=0;h<24;h++){ for(let m of [0,15,30,45]){ const v=`${fmt2(h)}:${fmt2(m)}`; const o=document.createElement('option'); o.value=v; o.textContent=v; t.appendChild(o);} } })();

    /* ===== To-do ===== */
    let tasks = LS('mtd_tasks') || [];
    function saveTasks(){ LS('mtd_tasks',tasks); }
    function renderTasks(){
      const wrap=$('#todoList'), report=$('#todoReport'); wrap.innerHTML=''; let overdue=0; const now=new Date();
      tasks.forEach((t,i)=>{ const li=document.createElement('div'); li.className='item';
        const dueStr = t.deadline?` (${t.deadline}${t.time?(' '+t.time):''})`:''; 
        const isOver = t.deadline && !t.completed && new Date(`${t.deadline} ${t.time||'23:59'}`) < now;
        if(t.completed) li.classList.add('completed'); else if(isOver){ li.classList.add('overdue'); overdue++; }
        li.innerHTML = `
          <input type="checkbox" ${t.completed?'checked':''} onclick="toggleTask(${i})">
          <span>${t.text}${dueStr}${t.repeat&&t.repeat!=='none'?' ‚Ä¢ <i>'+t.repeat+'</i>':''}</span>
          <button class="x" onclick="delTask(${i})">X√≥a</button>
        `;
        wrap.appendChild(li);
      });
      report.textContent = overdue?`‚ö†Ô∏è ${overdue} nhi·ªám v·ª• ƒë√£ qu√° h·∫°n!`: '';
    }
    function addTask(){
      const text=$('#taskInput').value.trim(), date=$('#dueDateInput').value, time=$('#dueTimeInput').value, rep=$('#repeatInput').value;
      if(!text){ toast('Nh·∫≠p n·ªôi dung'); return; }
      tasks.push({text, deadline:date||'', time:time||'', repeat:rep, completed:false});
      saveTasks(); renderTasks(); $('#taskInput').value=''; $('#dueDateInput').value=''; $('#dueTimeInput').value=''; $('#repeatInput').value='none';
    }
    function toggleTask(i){ tasks[i].completed=!tasks[i].completed; saveTasks(); renderTasks(); }
    function delTask(i){ tasks.splice(i,1); saveTasks(); renderTasks(); }
    renderTasks(); setInterval(renderTasks, 60000);

    /* ===== Export .ICS (To-do + Reminders) ===== */
    function icsEscape(s){return (s||'').replace(/[,;]/g,'\\$&')}
    function exportICS(){
      let lines=['BEGIN:VCALENDAR','VERSION:2.0','PRODID:-//MTD VPS LinkBio//VI'];
      const addEvent=(t,dt,desc)=>{ if(!dt) return; const dtstr=dt.replace(/[-:]/g,'').replace(' ','T')+'00'; lines.push('BEGIN:VEVENT',`UID:${crypto.randomUUID()}@mtdvps`,`DTSTAMP:${dtstr}Z`,`DTSTART:${dtstr}Z`, `SUMMARY:${icsEscape(t)}`, `DESCRIPTION:${icsEscape(desc||'')}`,'END:VEVENT'); };
      tasks.forEach(x=>{ if(x.deadline){ const dt = x.deadline+(x.time?(' '+x.time):' 09:00'); addEvent(x.text, dt, 'To-Do'); } });
      (LS('mtd_reminders')||[]).forEach(r=>{ const dt=r.date+' '+r.time; addEvent('Reminder: '+r.text, dt, r.repeat!=='none'?'Repeat: '+r.repeat:''); });
      lines.push('END:VCALENDAR');
      const blob=new Blob([lines.join('\n')],{type:'text/calendar'}); const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='mtd-linkbio.ics'; a.click(); URL.revokeObjectURL(a.href);
    }

    /* ===== Reminder Center ===== */
    let reminders = LS('mtd_reminders') || [];
    let remTimers = {}; // id -> timeoutId
    function saveRem(){ LS('mtd_reminders',reminders); }
    function addReminder(){
      const text=$('#remText').value.trim(), date=$('#remDate').value, time=$('#remTime').value, rep=$('#remRepeat').value;
      if(!text||!date||!time){ toast('Nh·∫≠p ƒë·ªß n·ªôi dung, ng√†y, gi·ªù'); return; }
      const id=crypto.randomUUID();
      reminders.push({id,text,date,time,repeat:rep,done:false}); saveRem(); renderReminders(); scheduleReminder(id);
      $('#remText').value=''; $('#remDate').value=''; $('#remTime').value=''; $('#remRepeat').value='none';
      toast('ƒê√£ ƒë·∫∑t nh·∫Øc');
    }
    function renderReminders(){
      const wrap=$('#remList'); wrap.innerHTML='';
      reminders.sort((a,b)=> (a.date+a.time).localeCompare(b.date+b.time));
      reminders.forEach((r,i)=>{
        const due = new Date(`${r.date} ${r.time}`), now=new Date(), left = Math.max(0, due-now); 
        const mins = Math.floor(left/60000), label = left?`${mins} ph√∫t n·ªØa`:'ƒê·∫øn h·∫°n';
        const div=document.createElement('div'); div.className='item'; if(left===0) div.classList.add('warn');
        div.innerHTML = `
          <span><b>${r.text}</b> ‚Äî ${r.date} ${r.time} (${r.repeat}) ‚Ä¢ <i>${label}</i></span>
          <button class="pill-btn" onclick="snooze('${r.id}',5)">Snooze 5'</button>
          <button class="x" onclick="delReminder('${r.id}')">X√≥a</button>
        `;
        wrap.appendChild(div);
      });
    }
    function scheduleReminder(id){
      const r=reminders.find(x=>x.id===id); if(!r) return;
      clearTimeout(remTimers[id]);
      const due = new Date(`${r.date} ${r.time}`).getTime(), now=Date.now(), wait = due-now;
      if(wait<=0){ fireReminder(r); return; }
      remTimers[id]=setTimeout(()=>fireReminder(r), wait);
    }
    function fireReminder(r){
      notify('üîî Reminder', `${r.text} ‚Äî ${r.date} ${r.time}`);
      toast('Nh·∫Øc: '+r.text);
      // repeat
      if(r.repeat==='daily' || r.repeat==='weekly'){
        const d=new Date(`${r.date} ${r.time}`);
        if(r.repeat==='daily') d.setDate(d.getDate()+1);
        else d.setDate(d.getDate()+7);
        r.date = d.toISOString().slice(0,10);
        r.time = d.toTimeString().slice(0,5);
        saveRem(); renderReminders(); scheduleReminder(r.id);
      }
    }
    function snooze(id,mins){
      const r=reminders.find(x=>x.id===id); if(!r) return;
      const d=new Date(); d.setMinutes(d.getMinutes()+mins);
      r.date=d.toISOString().slice(0,10); r.time=d.toTimeString().slice(0,5);
      saveRem(); renderReminders(); scheduleReminder(id); toast(`Snooze ${mins} ph√∫t`);
    }
    function delReminder(id){ reminders = reminders.filter(x=>x.id!==id); saveRem(); renderReminders(); clearTimeout(remTimers[id]); }
    // init schedules
    reminders.forEach(r=>scheduleReminder(r.id)); renderReminders();

    /* ===== Hydration / Stretch ===== */
    let hydrTimer=null, strTimer=null;
    function toggleHydration(){
      if(hydrTimer){ clearInterval(hydrTimer); hydrTimer=null; LS('hydr_on',false); $('#hydrStatus').textContent='T·∫Øt'; $('#hydrBtnTxt').textContent='B·∫≠t nh·∫Øc u·ªëng n∆∞·ªõc'; return; }
      const mins=parseInt($('#hydrInt').value||30,10); hydrTimer=setInterval(()=>{ notify('üíß U·ªëng n∆∞·ªõc','ƒê·∫∑t c·ªëc n∆∞·ªõc xu·ªëng v√† l√†m 3 ng·ª•m nh√©!'); toast('üíß U·ªëng n∆∞·ªõc!'); }, mins*60000);
      LS('hydr_on',true); LS('hydr_int',mins); $('#hydrStatus').textContent='B·∫≠t'; $('#hydrBtnTxt').textContent='T·∫Øt nh·∫Øc u·ªëng n∆∞·ªõc'; toast('ƒê√£ b·∫≠t nh·∫Øc u·ªëng n∆∞·ªõc');
    }
    function toggleStretch(){
      if(strTimer){ clearInterval(strTimer); strTimer=null; LS('str_on',false); $('#strStatus').textContent='T·∫Øt'; $('#strBtnTxt').textContent='B·∫≠t nh·∫Øc gi√£n c∆°'; return; }
      const mins=parseInt($('#strInt').value||60,10); strTimer=setInterval(()=>{ notify('üßç Gi√£n c∆°','ƒê·ª©ng d·∫≠y v∆∞∆°n vai/ƒëi l·∫°i 1-2 ph√∫t'); toast('üßç Gi√£n c∆°!'); }, mins*60000);
      LS('str_on',true); LS('str_int',mins); $('#strStatus').textContent='B·∫≠t'; $('#strBtnTxt').textContent='T·∫Øt nh·∫Øc gi√£n c∆°'; toast('ƒê√£ b·∫≠t nh·∫Øc gi√£n c∆°');
    }
    // restore hydration/stretch
    (function(){
      const ho=LS('hydr_on'), hi=LS('hydr_int')||30; $('#hydrInt').value=hi;
      if(ho){ toggleHydration(); } // will set interval & update UI
      const so=LS('str_on'), si=LS('str_int')||60; $('#strInt').value=si;
      if(so){ toggleStretch(); }
    })();

    /* ===== Birthday tracker ===== */
    let bds = LS('mtd_birthdays') || [];
    function saveBD(){ LS('mtd_birthdays', bds); }
    function nextBD(d){ // d: 'YYYY-MM-DD'
      const [Y,M,Da]=d.split('-').map(Number); const now=new Date();
      let next = new Date(now.getFullYear(), M-1, Da);
      if(next < new Date(now.getFullYear(), now.getMonth(), now.getDate())) next.setFullYear(next.getFullYear()+1);
      const days=Math.ceil((next - now)/(1000*60*60*24)); return {next, days};
    }
    function renderBD(){
      const wrap=$('#bdList'); wrap.innerHTML='';
      bds.sort((a,b)=> nextBD(a.date).days - nextBD(b.date).days);
      bds.forEach((x,i)=>{ const info=nextBD(x.date); const div=document.createElement('div'); div.className='item'; div.innerHTML=`<span><b>${x.name}</b> ‚Äî ${x.date} ‚Ä¢ C√≤n <b>${info.days}</b> ng√†y</span><button class="x" onclick="delBirthday(${i})">X√≥a</button>`; wrap.appendChild(div); });
    }
    function addBirthday(){ const n=$('#bdName').value.trim(), d=$('#bdDate').value; if(!n||!d){ toast('Nh·∫≠p t√™n v√† ng√†y'); return; } bds.push({name:n,date:d}); saveBD(); renderBD(); $('#bdName').value=''; $('#bdDate').value=''; }
    function delBirthday(i){ bds.splice(i,1); saveBD(); renderBD(); }
    renderBD();

    /* ===== Notes ===== */
    const noteKey='mtd_notes'; $('#noteBox').value = LS(noteKey) || ''; $('#noteBox').addEventListener('input', e=>LS(noteKey, e.target.value));
    function clearNotes(){ $('#noteBox').value=''; LS(noteKey,''); }
    function downloadText(){ const blob=new Blob([$('#noteBox').value||''],{type:'text/plain'}); const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='notes.txt'; a.click(); URL.revokeObjectURL(a.href); }

    /* ===== Pomodoro ===== */
    let pomoTimer=null, pomoLeft=0, pomoMode='work';
    function startPomo(){
      const w=parseInt($('#pomoWork').value,10)*60, b=parseInt($('#pomoBreak').value,10)*60;
      if(!pomoLeft){ pomoLeft = (pomoMode==='work'?w:b); }
      if(pomoTimer) clearInterval(pomoTimer);
      pomoTimer=setInterval(()=>{
        pomoLeft--; const m=Math.floor(pomoLeft/60), s=pomoLeft%60; $('#pomoTime').textContent=`${fmt2(m)}:${fmt2(s)}`;
        if(pomoLeft<=0){ clearInterval(pomoTimer); notify('‚è± Pomodoro', pomoMode==='work'?'H·∫øt phi√™n l√†m vi·ªác! Ngh·ªâ th√¥i.':'H·∫øt phi√™n ngh·ªâ! B·∫Øt ƒë·∫ßu l√†m.'); pomoMode=(pomoMode==='work'?'break':'work'); $('#pomoLabel').textContent='Ch·∫ø ƒë·ªô: '+(pomoMode==='work'?'Work':'Break'); pomoLeft=0; }
      },1000);
      $('#pomoLabel').textContent='Ch·∫ø ƒë·ªô: '+(pomoMode==='work'?'Work':'Break');
    }
    function stopPomo(){ clearInterval(pomoTimer); pomoTimer=null; pomoLeft=0; pomoMode='work'; $('#pomoTime').textContent=`${fmt2(parseInt($('#pomoWork').value,10))}:00`; $('#pomoLabel').textContent='Ch·∫ø ƒë·ªô: Work'; }

    /* ===== Backup / Restore ===== */
    function exportBackup(){
      const payload={
        mode: LS('mtd_mode')||'light',
        tasks, reminders, stats, birthdays:bds,
        notes: LS(noteKey)||'',
        hydr_on: LS('hydr_on')||false, hydr_int: LS('hydr_int')||30,
        str_on: LS('str_on')||false, str_int: LS('str_int')||60
      };
      const blob=new Blob([JSON.stringify(payload,null,2)],{type:'application/json'});
      const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download='mtd-linkbio-backup.json'; a.click(); URL.revokeObjectURL(a.href);
    }
    function importBackup(ev){
      const f=ev.target.files[0]; if(!f) return; const reader=new FileReader();
      reader.onload=()=>{ try{
          const d=JSON.parse(reader.result);
          if(d.mode) LS('mtd_mode', d.mode);
          tasks=d.tasks||[]; saveTasks(); renderTasks();
          reminders=d.reminders||[]; saveRem(); renderReminders(); reminders.forEach(r=>scheduleReminder(r.id));
          Object.assign(stats, d.stats||{}); LS(STAT_KEY,stats); renderStats();
          bds=d.birthdays||[]; saveBD(); renderBD();
          LS(noteKey, d.notes||''); $('#noteBox').value=d.notes||'';
          LS('hydr_on', !!d.hydr_on); LS('hydr_int', d.hydr_int||30); LS('str_on', !!d.str_on); LS('str_int', d.str_int||60);
          toast('ƒê√£ nh·∫≠p d·ªØ li·ªáu');
          location.reload(); // ƒë·ªÉ kh·ªüi t·∫°o l·∫°i timers/mode
        }catch(e){ toast('File kh√¥ng h·ª£p l·ªá'); }
      };
      reader.readAsText(f);
    }

    /* ===== Chatwoot ===== */
    (function(d,t) {
      var BASE_URL="https://chat-woot-web.kento28.shop/";
      var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
      g.src=BASE_URL+"packs/js/sdk.js"; g.defer = true; g.async = true; s.parentNode.insertBefore(g,s);
      g.onload=function(){ window.chatwootSDK.run({ websiteToken:'3fSZB9ohscy7Sy4WxTWojxoL', baseUrl:BASE_URL }) }
    })(document,"script");
  </script>
</body>
</html>
